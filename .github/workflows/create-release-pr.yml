name: create release pr

on:
    push:
        branches:
            - main

jobs:
    create-changelog:
        runs-on: ubuntu-latest
        name: "Create changelog with Commitizen"
        steps:
            - name: Check out
              uses: actions/checkout@v3
              with:
                fetch-depth: 0

            - name: Create bump and changelog
              uses: commitizen-tools/commitizen-action@master
              with:
                github_token: ${{ secrets.GITHUB_TOKEN }}
                dry_run: true
                changelog_increment_filename: body.md

            - name: Create Pull Request
              uses: peter-evans/create-pull-request@v5
              with:
                branch: "release/proposed-release_"
                branch-suffix: random
                title: "Proposed New Release"
                body-path: body.md
